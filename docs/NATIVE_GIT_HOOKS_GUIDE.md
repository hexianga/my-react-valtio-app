# åŸç”Ÿ Git Hooks å®ç°æŒ‡å—

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [Husky vs åŸç”Ÿ Git Hooks](#husky-vs-åŸç”Ÿ-git-hooks)
- [å®ç°æ–¹å¼](#å®ç°æ–¹å¼)
- [å®‰è£…æ–¹æ³•](#å®‰è£…æ–¹æ³•)
- [å·¥ä½œåŸç†](#å·¥ä½œåŸç†)
- [ä¼˜ç¼ºç‚¹å¯¹æ¯”](#ä¼˜ç¼ºç‚¹å¯¹æ¯”)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)

## æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•**ä¸ä½¿ç”¨ Husky**ï¼Œç›´æ¥ä½¿ç”¨ Git åŸç”Ÿçš„ hooks æœºåˆ¶æ¥å®ç°åˆ†æ”¯ä¿æŠ¤åŠŸèƒ½ã€‚

## Husky vs åŸç”Ÿ Git Hooks

### æ¶æ„å¯¹æ¯”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä½¿ç”¨ Husky çš„æ–¹å¼                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  .husky/pre-push  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  (å¯ä»¥æäº¤åˆ° Git)                                        â”‚   â”‚
â”‚                                                          â”‚   â”‚
â”‚  â†“ npm install æ—¶è‡ªåŠ¨å®‰è£…                                â”‚   â”‚
â”‚                                                          â”‚   â”‚
â”‚  .git/hooks/pre-push  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  (ç”± husky è‡ªåŠ¨åˆ›å»ºå’Œç®¡ç†)                                   â”‚
â”‚                                                              â”‚
â”‚  â†“ æ‰§è¡Œ                                                      â”‚
â”‚                                                              â”‚
â”‚  scripts/branch-protection.js                                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åŸç”Ÿ Git Hooks æ–¹å¼                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  scripts/install-git-hooks.js  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  (éœ€è¦æ‰‹åŠ¨è¿è¡Œ)                                          â”‚   â”‚
â”‚                                                          â”‚   â”‚
â”‚  â†“ æ‰‹åŠ¨æ‰§è¡Œå®‰è£…è„šæœ¬                                      â”‚   â”‚
â”‚                                                          â”‚   â”‚
â”‚  .git/hooks/pre-push  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  (ä¸èƒ½æäº¤åˆ° Gitï¼Œéœ€è¦æ¯ä¸ªäººæ‰‹åŠ¨å®‰è£…)                        â”‚
â”‚                                                              â”‚
â”‚  â†“ æ‰§è¡Œ                                                      â”‚
â”‚                                                              â”‚
â”‚  scripts/branch-protection.js                                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®åŒºåˆ«

| ç‰¹æ€§ | Husky | åŸç”Ÿ Git Hooks |
|------|-------|----------------|
| **Hook ä½ç½®** | `.husky/` ç›®å½• | `.git/hooks/` ç›®å½• |
| **ç‰ˆæœ¬æ§åˆ¶** | âœ… å¯ä»¥æäº¤åˆ° Git | âŒ ä¸èƒ½æäº¤ï¼ˆ.git ç›®å½•ä¸è¢«è¿½è¸ªï¼‰ |
| **å›¢é˜Ÿå…±äº«** | âœ… è‡ªåŠ¨åŒæ­¥ç»™æ‰€æœ‰æˆå‘˜ | âŒ æ¯ä¸ªæˆå‘˜éœ€è¦æ‰‹åŠ¨å®‰è£… |
| **å®‰è£…æ–¹å¼** | `npm install` è‡ªåŠ¨ | éœ€è¦è¿è¡Œå®‰è£…è„šæœ¬ |
| **ä¾èµ–** | éœ€è¦ husky npm åŒ… | æ— éœ€é¢å¤–ä¾èµ– |
| **è·¨å¹³å°** | âœ… å®Œå…¨æ”¯æŒ | âœ… éœ€è¦æ³¨æ„è„šæœ¬å…¼å®¹æ€§ |
| **ç»´æŠ¤æˆæœ¬** | ä½ï¼ˆè‡ªåŠ¨åŒ–ï¼‰ | ä¸­ï¼ˆéœ€è¦æ–‡æ¡£è¯´æ˜ï¼‰ |
| **çµæ´»æ€§** | ä¸­ | é«˜ï¼ˆå®Œå…¨æ§åˆ¶ï¼‰ |
| **é€‚ç”¨åœºæ™¯** | å›¢é˜Ÿåä½œé¡¹ç›® | ä¸ªäººé¡¹ç›®ã€ç®€å•åœºæ™¯ |

## å®ç°æ–¹å¼

### æ–¹å¼ 1: Shell è„šæœ¬å®‰è£…ï¼ˆMac/Linuxï¼‰

**æ–‡ä»¶**: `scripts/install-git-hooks.sh`

```bash
#!/bin/bash

# åˆ›å»º pre-push hook
cat > .git/hooks/pre-push << 'EOF'
#!/bin/bash
node scripts/branch-protection.js
exit $?
EOF

# æ·»åŠ å¯æ‰§è¡Œæƒé™
chmod +x .git/hooks/pre-push
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
bash scripts/install-git-hooks.sh
```

### æ–¹å¼ 2: Node.js è„šæœ¬å®‰è£…ï¼ˆè·¨å¹³å°ï¼‰

**æ–‡ä»¶**: `scripts/install-git-hooks.js`

```javascript
const fs = require('fs');
const path = require('path');

// åˆ›å»º hook å†…å®¹
const hookContent = `#!/bin/sh
node scripts/branch-protection.js
exit $?
`;

// å†™å…¥ hook æ–‡ä»¶
const hookPath = path.join(process.cwd(), '.git', 'hooks', 'pre-push');
fs.writeFileSync(hookPath, hookContent, { mode: 0o755 });
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
node scripts/install-git-hooks.js
```

**ä¼˜åŠ¿**:
- âœ… è·¨å¹³å°å…¼å®¹ï¼ˆWindows/Mac/Linuxï¼‰
- âœ… å¯ä»¥åœ¨ package.json ä¸­é…ç½®è‡ªåŠ¨å®‰è£…
- âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†

### æ–¹å¼ 3: æ‰‹åŠ¨åˆ›å»ºï¼ˆæœ€ç®€å•ï¼‰

ç›´æ¥åˆ›å»º `.git/hooks/pre-push` æ–‡ä»¶ï¼š

```bash
#!/bin/sh
node scripts/branch-protection.js
exit $?
```

ç„¶åæ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x .git/hooks/pre-push
```

## å®‰è£…æ–¹æ³•

### æ–¹æ³• 1: ä½¿ç”¨ Node.js è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# å®‰è£…
node scripts/install-git-hooks.js

# å¸è½½
node scripts/uninstall-git-hooks.js
```

### æ–¹æ³• 2: ä½¿ç”¨ Shell è„šæœ¬ï¼ˆMac/Linuxï¼‰

```bash
# å®‰è£…
bash scripts/install-git-hooks.sh

# å¸è½½
bash scripts/uninstall-git-hooks.sh
```

### æ–¹æ³• 3: é…ç½®è‡ªåŠ¨å®‰è£…

åœ¨ `package.json` ä¸­æ·»åŠ ï¼š

```json
{
  "scripts": {
    "postinstall": "node scripts/install-git-hooks.js"
  }
}
```

è¿™æ ·æ¯æ¬¡è¿è¡Œ `npm install` æ—¶ä¼šè‡ªåŠ¨å®‰è£… hooksã€‚

**æ³¨æ„**:
- âœ… é€‚åˆä¸ªäººé¡¹ç›®æˆ–å°å›¢é˜Ÿ
- âš ï¸ CI/CD ç¯å¢ƒå¯èƒ½ä¸éœ€è¦ï¼Œå¯ä»¥æ·»åŠ ç¯å¢ƒæ£€æµ‹è·³è¿‡

```javascript
// åœ¨ install-git-hooks.js ä¸­æ·»åŠ 
if (process.env.CI) {
  console.log('CI ç¯å¢ƒï¼Œè·³è¿‡ Git hooks å®‰è£…');
  process.exit(0);
}
```

## å·¥ä½œåŸç†

### 1. Git Hooks ç›®å½•ç»“æ„

```
.git/
â””â”€â”€ hooks/
    â”œâ”€â”€ pre-push          # æ¨é€å‰æ‰§è¡Œ
    â”œâ”€â”€ pre-commit        # æäº¤å‰æ‰§è¡Œ
    â”œâ”€â”€ commit-msg        # æäº¤æ¶ˆæ¯éªŒè¯
    â”œâ”€â”€ pre-rebase        # å˜åŸºå‰æ‰§è¡Œ
    â””â”€â”€ ...               # å…¶ä»– hooks
```

### 2. Hook æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·æ‰§è¡Œ: git push origin master
         â”‚
         â–¼
Git æ£€æŸ¥: .git/hooks/pre-push æ˜¯å¦å­˜åœ¨ä¸”å¯æ‰§è¡Œï¼Ÿ
         â”‚
         â”œâ”€ å¦ â”€â”€â†’ ç›´æ¥æ¨é€
         â”‚
         â””â”€ æ˜¯ â”€â”€â†’ æ‰§è¡Œ .git/hooks/pre-push
                   â”‚
                   â”œâ”€ é€€å‡ºç  = 0 â”€â”€â†’ ç»§ç»­æ¨é€
                   â”‚
                   â””â”€ é€€å‡ºç  â‰  0 â”€â”€â†’ ä¸­æ­¢æ¨é€
```

### 3. Hook å†…å®¹

**Unix ç³»ç»Ÿ** (Mac/Linux):
```bash
#!/bin/sh
# Git Pre-Push Hook - åˆ†æ”¯ä¿æŠ¤

node scripts/branch-protection.js
exit $?
```

**Windows ç³»ç»Ÿ**:
```batch
@echo off
REM Git Pre-Push Hook - åˆ†æ”¯ä¿æŠ¤

node scripts/branch-protection.js
exit /b %ERRORLEVEL%
```

### 4. æ•°æ®ä¼ é€’

Git é€šè¿‡**æ ‡å‡†è¾“å…¥ (stdin)** ä¼ é€’æ¨é€ä¿¡æ¯ï¼š

```
refs/heads/feature abc123 refs/heads/master def456
```

`branch-protection.js` è¯»å–è¿™äº›ä¿¡æ¯å¹¶æ£€æŸ¥ç›®æ ‡åˆ†æ”¯ã€‚

## ä¼˜ç¼ºç‚¹å¯¹æ¯”

### ä½¿ç”¨ Husky çš„ä¼˜ç‚¹

âœ… **è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜**
- `npm install` è‡ªåŠ¨å®‰è£…
- å›¢é˜Ÿæˆå‘˜æ— éœ€é¢å¤–æ“ä½œ

âœ… **ç‰ˆæœ¬æ§åˆ¶**
- hooks é…ç½®å¯ä»¥æäº¤åˆ° Git
- ä¿è¯å›¢é˜Ÿä¸€è‡´æ€§

âœ… **æ˜“äºç»´æŠ¤**
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ hooks
- æ›´æ–°æ—¶è‡ªåŠ¨åŒæ­¥

âœ… **æ–‡æ¡£å®Œå–„**
- ç¤¾åŒºæ”¯æŒå¥½
- é—®é¢˜å®¹æ˜“è§£å†³

### ä½¿ç”¨ Husky çš„ç¼ºç‚¹

âŒ **é¢å¤–ä¾èµ–**
- éœ€è¦å®‰è£… husky npm åŒ…
- å¢åŠ é¡¹ç›®ä¾èµ–

âŒ **å­¦ä¹ æˆæœ¬**
- éœ€è¦äº†è§£ husky é…ç½®
- å¯èƒ½é‡åˆ°ç‰ˆæœ¬å…¼å®¹é—®é¢˜

### åŸç”Ÿ Git Hooks çš„ä¼˜ç‚¹

âœ… **æ— éœ€ä¾èµ–**
- ä¸éœ€è¦å®‰è£…é¢å¤–çš„ npm åŒ…
- å‡å°‘é¡¹ç›®ä½“ç§¯

âœ… **å®Œå…¨æ§åˆ¶**
- ç›´æ¥æ“ä½œ Git hooks
- æ›´çµæ´»çš„å®šåˆ¶

âœ… **ç®€å•ç›´æ¥**
- åŸç†æ¸…æ™°æ˜“æ‡‚
- é€‚åˆå­¦ä¹  Git æœºåˆ¶

### åŸç”Ÿ Git Hooks çš„ç¼ºç‚¹

âŒ **æ‰‹åŠ¨å®‰è£…**
- æ¯ä¸ªæˆå‘˜éœ€è¦æ‰‹åŠ¨è¿è¡Œå®‰è£…è„šæœ¬
- å®¹æ˜“è¢«é—å¿˜

âŒ **ä¸èƒ½ç‰ˆæœ¬æ§åˆ¶**
- `.git/hooks` ä¸èƒ½æäº¤åˆ° Git
- æ›´æ–°æ—¶éœ€è¦é€šçŸ¥æ‰€æœ‰æˆå‘˜

âŒ **ç»´æŠ¤æˆæœ¬é«˜**
- éœ€è¦ç¼–å†™å®‰è£…è„šæœ¬
- éœ€è¦æ–‡æ¡£è¯´æ˜

âŒ **å›¢é˜Ÿåä½œä¸ä¾¿**
- æ–°æˆå‘˜å¯èƒ½ä¸çŸ¥é“è¦å®‰è£…
- æ›´æ–°æ—¶åŒæ­¥å›°éš¾

## ä½¿ç”¨åœºæ™¯

### é€‚åˆä½¿ç”¨ Husky çš„åœºæ™¯

âœ… **å›¢é˜Ÿåä½œé¡¹ç›®**
- å¤šäººå¼€å‘
- éœ€è¦ç»Ÿä¸€çš„ä»£ç è§„èŒƒ

âœ… **å¼€æºé¡¹ç›®**
- è´¡çŒ®è€…ä¼—å¤š
- éœ€è¦è‡ªåŠ¨åŒ–æµç¨‹

âœ… **ä¼ä¸šçº§é¡¹ç›®**
- ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥æµç¨‹
- éœ€è¦å¼ºåˆ¶æ‰§è¡Œè§„èŒƒ

### é€‚åˆä½¿ç”¨åŸç”Ÿ Git Hooks çš„åœºæ™¯

âœ… **ä¸ªäººé¡¹ç›®**
- å•äººå¼€å‘
- ä¸éœ€è¦å›¢é˜Ÿåä½œ

âœ… **å­¦ä¹ ç›®çš„**
- äº†è§£ Git hooks åŸç†
- å­¦ä¹ è‡ªåŠ¨åŒ–å·¥å…·

âœ… **ç®€å•éœ€æ±‚**
- åªéœ€è¦ä¸€ä¸¤ä¸ªç®€å•çš„ hooks
- ä¸æƒ³å¼•å…¥é¢å¤–ä¾èµ–

âœ… **ç‰¹æ®Šç¯å¢ƒ**
- æ— æ³•ä½¿ç”¨ npm
- éœ€è¦å®Œå…¨æ§åˆ¶ hooks

## å®é™…ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯ 1: æ–°æˆå‘˜åŠ å…¥å›¢é˜Ÿ

**ä½¿ç”¨ Husky**:
```bash
git clone <repo>
npm install  # è‡ªåŠ¨å®‰è£… hooks
# å®Œæˆï¼
```

**ä½¿ç”¨åŸç”Ÿ Git Hooks**:
```bash
git clone <repo>
npm install
node scripts/install-git-hooks.js  # éœ€è¦é¢å¤–æ­¥éª¤
# å®Œæˆï¼
```

### åœºæ™¯ 2: æ›´æ–° Hook é€»è¾‘

**ä½¿ç”¨ Husky**:
```bash
# å¼€å‘è€…ä¿®æ”¹ .husky/pre-push
git commit -m "update: pre-push hook"
git push

# å…¶ä»–æˆå‘˜
git pull
npm install  # è‡ªåŠ¨æ›´æ–°
```

**ä½¿ç”¨åŸç”Ÿ Git Hooks**:
```bash
# å¼€å‘è€…ä¿®æ”¹ scripts/branch-protection.js
git commit -m "update: branch protection"
git push

# å…¶ä»–æˆå‘˜
git pull
node scripts/install-git-hooks.js  # éœ€è¦é‡æ–°å®‰è£…
```

### åœºæ™¯ 3: CI/CD ç¯å¢ƒ

**ä½¿ç”¨ Husky**:
```yaml
# .github/workflows/ci.yml
- name: Install dependencies
  run: npm ci  # ä¼šå®‰è£… hooksï¼Œä½† CI ç¯å¢ƒé€šå¸¸ä¸éœ€è¦
```

**ä½¿ç”¨åŸç”Ÿ Git Hooks**:
```yaml
# .github/workflows/ci.yml
- name: Install dependencies
  run: npm ci  # ä¸ä¼šå®‰è£… hooksï¼ˆé™¤éé…ç½®äº† postinstallï¼‰
```

## æœ€ä½³å®è·µ

### 1. æ–‡æ¡£è¯´æ˜

åœ¨ README.md ä¸­æ˜ç¡®è¯´æ˜ï¼š

```markdown
## å¼€å‘ç¯å¢ƒè®¾ç½®

1. å…‹éš†ä»“åº“
   ```bash
   git clone <repo>
   ```

2. å®‰è£…ä¾èµ–
   ```bash
   npm install
   ```

3. å®‰è£… Git Hooksï¼ˆé‡è¦ï¼ï¼‰
   ```bash
   node scripts/install-git-hooks.js
   ```
```

### 2. è‡ªåŠ¨åŒ–å®‰è£…

åœ¨ `package.json` ä¸­æ·»åŠ ï¼š

```json
{
  "scripts": {
    "postinstall": "node scripts/install-git-hooks.js",
    "install-hooks": "node scripts/install-git-hooks.js",
    "uninstall-hooks": "node scripts/uninstall-git-hooks.js"
  }
}
```

### 3. ç¯å¢ƒæ£€æµ‹

åœ¨å®‰è£…è„šæœ¬ä¸­æ·»åŠ ç¯å¢ƒæ£€æµ‹ï¼š

```javascript
// è·³è¿‡ CI ç¯å¢ƒ
if (process.env.CI) {
  console.log('CI ç¯å¢ƒï¼Œè·³è¿‡ Git hooks å®‰è£…');
  process.exit(0);
}

// æ£€æŸ¥æ˜¯å¦åœ¨ Git ä»“åº“ä¸­
if (!fs.existsSync('.git')) {
  console.log('ä¸æ˜¯ Git ä»“åº“ï¼Œè·³è¿‡å®‰è£…');
  process.exit(0);
}
```

### 4. éªŒè¯å®‰è£…

æä¾›éªŒè¯å‘½ä»¤ï¼š

```json
{
  "scripts": {
    "verify-hooks": "test -f .git/hooks/pre-push && echo 'Hooks installed' || echo 'Hooks not installed'"
  }
}
```

### 5. å›¢é˜Ÿæ²Ÿé€š

- ğŸ“ åœ¨å›¢é˜Ÿæ–‡æ¡£ä¸­è¯´æ˜å®‰è£…æ­¥éª¤
- ğŸ’¬ åœ¨ PR æ¨¡æ¿ä¸­æé†’æ£€æŸ¥ hooks
- ğŸ”” å®šæœŸæé†’å›¢é˜Ÿæˆå‘˜æ›´æ–° hooks

## è¿ç§»æŒ‡å—

### ä» Husky è¿ç§»åˆ°åŸç”Ÿ Git Hooks

1. **ç§»é™¤ Husky**:
   ```bash
   npm uninstall husky
   rm -rf .husky
   ```

2. **åˆ›å»ºå®‰è£…è„šæœ¬**:
   ```bash
   # ä½¿ç”¨æœ¬é¡¹ç›®æä¾›çš„è„šæœ¬
   node scripts/install-git-hooks.js
   ```

3. **æ›´æ–°æ–‡æ¡£**:
   - åœ¨ README ä¸­è¯´æ˜æ–°çš„å®‰è£…æ­¥éª¤
   - é€šçŸ¥å›¢é˜Ÿæˆå‘˜

4. **æ›´æ–° package.json**:
   ```json
   {
     "scripts": {
       "postinstall": "node scripts/install-git-hooks.js"
     }
   }
   ```

### ä»åŸç”Ÿ Git Hooks è¿ç§»åˆ° Husky

1. **å®‰è£… Husky**:
   ```bash
   npm install --save-dev husky
   npx husky install
   ```

2. **åˆ›å»º Hook**:
   ```bash
   npx husky add .husky/pre-push "node scripts/branch-protection.js"
   ```

3. **é…ç½®è‡ªåŠ¨å®‰è£…**:
   ```json
   {
     "scripts": {
       "prepare": "husky install"
     }
   }
   ```

4. **æ¸…ç†åŸç”Ÿ Hooks**:
   ```bash
   rm .git/hooks/pre-push
   ```

## æ€»ç»“

### é€‰æ‹©å»ºè®®

| é¡¹ç›®ç±»å‹ | æ¨èæ–¹æ¡ˆ | åŸå›  |
|---------|---------|------|
| å›¢é˜Ÿåä½œé¡¹ç›® | Husky | è‡ªåŠ¨åŒ–ã€æ˜“ç»´æŠ¤ |
| ä¸ªäººé¡¹ç›® | åŸç”Ÿ Git Hooks | ç®€å•ã€æ— ä¾èµ– |
| å¼€æºé¡¹ç›® | Husky | è´¡çŒ®è€…ä½“éªŒå¥½ |
| å­¦ä¹ é¡¹ç›® | åŸç”Ÿ Git Hooks | ç†è§£åŸç† |
| ä¼ä¸šé¡¹ç›® | Husky | è§„èŒƒç»Ÿä¸€ |

### æ ¸å¿ƒè¦ç‚¹

1. **Husky é€‚åˆå›¢é˜Ÿ**ï¼šè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ï¼Œç»´æŠ¤æˆæœ¬ä½
2. **åŸç”Ÿ Hooks é€‚åˆä¸ªäºº**ï¼šç®€å•ç›´æ¥ï¼Œæ— éœ€ä¾èµ–
3. **ä¸¤è€…å¯ä»¥å…±å­˜**ï¼šæ ¹æ®éœ€è¦çµæ´»é€‰æ‹©
4. **æ ¸å¿ƒé€»è¾‘ç›¸åŒ**ï¼šéƒ½æ˜¯è°ƒç”¨ `branch-protection.js`

### æœ¬é¡¹ç›®æä¾›çš„å·¥å…·

- âœ… `scripts/branch-protection.js` - åˆ†æ”¯ä¿æŠ¤æ ¸å¿ƒé€»è¾‘
- âœ… `scripts/install-git-hooks.js` - è·¨å¹³å°å®‰è£…è„šæœ¬
- âœ… `scripts/install-git-hooks.sh` - Shell å®‰è£…è„šæœ¬
- âœ… `scripts/uninstall-git-hooks.sh` - å¸è½½è„šæœ¬
- âœ… `scripts/test-branch-protection.js` - æµ‹è¯•è„šæœ¬

æ— è®ºé€‰æ‹©å“ªç§æ–¹å¼ï¼Œæ ¸å¿ƒçš„åˆ†æ”¯ä¿æŠ¤é€»è¾‘éƒ½æ˜¯ç›¸åŒçš„ï¼

---

**ç›¸å…³æ–‡æ¡£**:
- [BRANCH_PROTECTION.md](./BRANCH_PROTECTION.md) - åˆ†æ”¯ä¿æŠ¤è¯¦ç»†æ–‡æ¡£
- [scripts/README.md](./scripts/README.md) - è„šæœ¬ä½¿ç”¨è¯´æ˜

**ç»´æŠ¤è€…**: é¡¹ç›®å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2024
