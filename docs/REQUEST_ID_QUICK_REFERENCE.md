# ğŸ†” RequestId å¿«é€Ÿå‚è€ƒå¡ç‰‡

## ä¸€å¥è¯æ€»ç»“

**RequestId æ˜¯ä¸€ä¸ªå”¯ä¸€çš„è¯·æ±‚æ ‡è¯†ç¬¦ï¼Œç”¨äºè¿½è¸ªå’Œå…³è”å‰åç«¯çš„è¯·æ±‚æ—¥å¿—ã€‚**

## æ ¸å¿ƒä½œç”¨ï¼ˆ5 ä¸ªï¼‰

| # | ä½œç”¨ | è¯´æ˜ |
|---|------|------|
| 1ï¸âƒ£ | ğŸ”— é“¾è·¯è¿½è¸ª | è¿½è¸ªè¯·æ±‚ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„å®Œæ•´é“¾è·¯ |
| 2ï¸âƒ£ | ğŸ› é—®é¢˜æ’æŸ¥ | å¿«é€Ÿå®šä½é—®é¢˜å‘ç”Ÿçš„ä½ç½® |
| 3ï¸âƒ£ | ğŸ“Š æ€§èƒ½åˆ†æ | åˆ†æå•ä¸ªè¯·æ±‚çš„æ€§èƒ½ç“¶é¢ˆ |
| 4ï¸âƒ£ | ğŸ” å®‰å…¨å®¡è®¡ | è®°å½•ç”¨æˆ·æ“ä½œï¼Œä¾¿äºå®‰å…¨å®¡è®¡ |
| 5ï¸âƒ£ | ğŸ“ˆ æ•°æ®åˆ†æ | åˆ†æç”¨æˆ·è¡Œä¸ºå’Œç³»ç»Ÿæ€§èƒ½ |

## å·¥ä½œæµç¨‹

```
è¯·æ±‚å‘èµ·
  â†“
ç”Ÿæˆ requestId (1700000000000-abc123def)
  â†“
æ·»åŠ åˆ°è¯·æ±‚å¤´ (X-Request-ID)
  â†“
å‘é€åˆ°æœåŠ¡å™¨
  â†“
æœåŠ¡å™¨è®°å½• requestId
  â†“
æœåŠ¡å™¨è¿”å›å“åº”
  â†“
å‰åç«¯æ—¥å¿—é€šè¿‡ requestId å…³è”
```

## ä»£ç ç¤ºä¾‹

### å‰ç«¯ï¼ˆè‡ªåŠ¨å¤„ç†ï¼‰

```typescript
// è‡ªåŠ¨ç”Ÿæˆå’Œä¼ é€’ requestId
import { get, post } from '../services/api';

// æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨åŒ…å« requestId
const data = await get('/api/users');
// è¯·æ±‚å¤´è‡ªåŠ¨åŒ…å«: X-Request-ID: 1700000000000-abc123def
```

### åç«¯ï¼ˆNode.js/Expressï¼‰

```typescript
app.use((req, res, next) => {
  const requestId = req.headers['x-request-id'];

  // åœ¨æ‰€æœ‰æ—¥å¿—ä¸­ä½¿ç”¨ requestId
  console.log(`[${requestId}] Request received`);

  // åœ¨å“åº”å¤´ä¸­è¿”å› requestId
  res.setHeader('X-Request-ID', requestId);

  next();
});
```

## æ—¥å¿—ç¤ºä¾‹

### å‰ç«¯æ—¥å¿—

```
[API] å‘èµ·è¯·æ±‚ GET /api/users
âœ… [API] GET /api/users
â”œâ”€ è¯·æ±‚ID: 1700000000000-abc123def
â”œâ”€ çŠ¶æ€ç : 200
â”œâ”€ ç«¯åˆ°ç«¯è€—æ—¶: 298ms
â””â”€ æ—¶é—´: 14:30:45
```

### åç«¯æ—¥å¿—

```
[1700000000000-abc123def] GET /api/users started
[1700000000000-abc123def] Querying database...
[1700000000000-abc123def] Response sent (298ms)
```

## æŸ¥è¯¢æ–¹æ³•

### æŸ¥çœ‹å‰ç«¯æ—¥å¿—

```
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
â†’ Console æ ‡ç­¾
â†’ æŸ¥çœ‹æ‰€æœ‰ API è¯·æ±‚çš„ requestId
```

### æŸ¥çœ‹åç«¯æ—¥å¿—

```bash
# æŸ¥æ‰¾ç‰¹å®š requestId çš„æ‰€æœ‰æ—¥å¿—
grep "1700000000000-abc123def" /var/log/app.log
```

## æœ€ä½³å®è·µ

âœ… **å¿…é¡»åš**
- ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆ requestId
- åœ¨æ‰€æœ‰æ—¥å¿—ä¸­ä½¿ç”¨ requestId
- åœ¨å“åº”å¤´ä¸­è¿”å› requestId
- åœ¨é”™è¯¯å¤„ç†ä¸­åŒ…å« requestId

âŒ **ä¸è¦åš**
- å¿˜è®°ç”Ÿæˆ requestId
- åœ¨æ—¥å¿—ä¸­ä¸ä½¿ç”¨ requestId
- ä¸åœ¨å“åº”å¤´ä¸­è¿”å› requestId
- åœ¨é”™è¯¯å¤„ç†ä¸­å¿½ç•¥ requestId

## å¸¸è§é—®é¢˜

### Q: RequestId çš„æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ
A: `timestamp-randomString`ï¼Œä¾‹å¦‚ `1700000000000-abc123def`

### Q: RequestId ä¼šé‡å¤å—ï¼Ÿ
A: å‡ ä¹ä¸ä¼šï¼Œå› ä¸ºåŒ…å«æ—¶é—´æˆ³å’Œéšæœºå­—ç¬¦ä¸²

### Q: å¦‚ä½•åœ¨åç«¯è·å– requestIdï¼Ÿ
A: ä»è¯·æ±‚å¤´ä¸­è·å– `X-Request-ID`

### Q: RequestId æœ‰ä»€ä¹ˆç”¨ï¼Ÿ
A: è¿½è¸ªè¯·æ±‚é“¾è·¯ã€å…³è”å‰åç«¯æ—¥å¿—ã€å¿«é€Ÿæ’æŸ¥é—®é¢˜

## ç›¸å…³æ–‡ä»¶

- ğŸ“„ è¯¦ç»†æŒ‡å—: `REQUEST_ID_GUIDE.md`
- ğŸ’» å®ç°ä»£ç : `src/services/api.ts`
- ğŸ“Š ä¼˜åŒ–æŒ‡å—: `AXIOS_OPTIMIZATION_GUIDE.md`

---

**å¿«é€Ÿè®°ä½**: RequestId = è¯·æ±‚çš„å”¯ä¸€èº«ä»½è¯ ğŸ†”
